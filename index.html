<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Word focus</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

	<style>
		.words {
			font-size: 2.5rem;
			font-weight: bold;
			min-height: 60px;
		}

		.background-words {
			color: #00000050;
		}
	</style>
</head>
<body class="container py-4">

	<div class="row text-center mb-3">
		<div class="col">
			<h5 class="text-muted">Previous</h5>
			<div class="words background-words" id="previous"></div>
		</div>
	</div>

	<hr>

	<div class="row text-center mb-3">
		<div class="col">
			<h5 class="text-muted">Current</h5>
			<div class="words" id="current"></div>
		</div>
	</div>

	<hr>

	<div class="row text-center mb-3">
		<div class="col">
			<h5 class="text-muted">Next</h5>
			<div class="words background-words" id="next"></div>
		</div>
	</div>

	<hr>

	<div class="row mb-3">
		<div class="col-md-6">
			<label for="wpm" class="form-label">Words Per Minute (WPM)</label>
			<input type="number" class="form-control" id="wpm" value="300" min="1" />
		</div>
	</div>
	
	<div class="text-center mb-3">
		<button id="start" class="btn btn-primary btn-lg d-none">Start</button>
	</div>

	<div class="mb-3">
		<label for="source" class="form-label">Input Text</label>
		<textarea class="form-control" id="source" rows="4" placeholder="Enter your text here..."></textarea>
	</div>

	<script>
		const source = document.getElementById('source');
		const current = document.getElementById('current');
		const previous = document.getElementById('previous');
		const next = document.getElementById('next');
		const start = document.getElementById('start');
		const wpmInput = document.getElementById('wpm');

		let source_arr = [];
		let index = 0;
		let interval = null;

		source.addEventListener('input', () => {
			source_arr = source.value.trim().split(/\s+/).filter(Boolean);
			start.classList.toggle('d-none', source_arr.length === 0);
			index = 0;
			clearInterval(interval);
			previous.textContent = '';
			current.textContent = '';
			next.textContent = '';
		});

		start.addEventListener('click', () => {
			clearInterval(interval);
			index = 0;

			const wpm = parseInt(wpmInput.value, 10) || 300;
			const delay = Math.floor(60000 / wpm); // ms per word

			interval = setInterval(() => {
				previous.textContent = source_arr[index - 1] || '';
				current.textContent = source_arr[index] || '';
				next.textContent = source_arr[index + 1] || '';

				index++;
				if (index >= source_arr.length) index = 0;
			}, delay);
		});

	</script>
</body>
</html>
